import basic.osc

scenario top:
    path: Path
    path.set_map("Town04")
    path.path_min_driving_lanes(2)

    ego_vehicle: Model3
    vehicle1: Rubicon
    pedestrian: pedestrian

    event start
    event end

    do serial:
        setup: parallel(duration: 5s):
            ego_vehicle.drive(path) with:
                speed(40kph)
                lane(1, at: start)

            vehicle1.drive(path) with:
                speed(35kph)
                lane(2, at: start)

            pedestrian.walk(path) with:
                position(10m, lateral: 10m, at: start)

        normal_driving: parallel(duration: 8s):
            ego_vehicle.drive(path) with:
                speed(40kph)
            vehicle1.drive(path) with:
                speed(35kph)

        pedestrian_crossing: parallel(duration: 10s):
            ego_vehicle.drive(path)
            vehicle1.drive(path)
            pedestrian.walk(path)
